<div class="container-fluid">

    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="/admin">Dashboard</a>
        </li>
        <li class="breadcrumb-item active">Category page</li>
    </ol>

    <div class="card-header">
        <h2>Category Pages</h2>
    </div>

    <div class="card body">

        <div class="col-md-6 mb-3">
            <a href="/admin/category/create" class="btn btn-primary">
                Add a Category
            </a>
        </div>


        <!-- -------- SEARCH FORM -------- -->
        <form method="GET" action="/admin/category" class="row mb-3">

            <!-- Search -->
            <div class="col-md-4">
                <input type="text"
                       name="keyword"
                       value="{{keyword}}"
                       placeholder="Search category name..."
                       class="form-control">
            </div>

            <!-- Status -->
            <div class="col-md-3">
                <select name="status" class="form-control">
                    <option value="">-- All Status --</option>

                    <option value="true"
                            {{#if (eq statusFilter "true")}}selected{{/if}}>
                        Active
                    </option>

                    <option value="false"
                            {{#if (eq statusFilter "false")}}selected{{/if}}>
                        Inactive
                    </option>
                </select>
            </div>

            <div class="col-md-3">
                <button class="btn btn-primary">Search</button>

                <a href="/admin/category" class="btn btn-secondary">
                    Reset
                </a>
            </div>
        </form>


        <!-- -------- TABLE -------- -->
        <table class="table">
            <thead class="table-dark">
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">IMAGE</th>
                <th scope="col">STATUS</th>
                <th scope="col">EDIT</th>
                <th scope="col">DELETE</th>
            </tr>
            </thead>

            <tbody>

            {{#each categories}}
                <tr>
                    <th scope="row">{{_id}}</th>

                    <td>{{name}}</td>

                    <td>
                        <img src="{{image}}" class="img-thumbnail" width="100">
                    </td>

                    <td>
                        {{#if status}}
                            <i class="fa-solid fa-circle-check text-success"></i>
                        {{else}}
                            <i class="fa-solid fa-circle-xmark text-danger"></i>
                        {{/if}}
                    </td>

                    <td>
                        <a href="/admin/category/edit/{{_id}}">
                            <i class="fa-solid fa-pen-to-square text-warning"></i>
                        </a>
                    </td>

                    <td>
                        <form action="/admin/category/{{_id}}?_method=DELETE" method="post">
                            <button type="submit" class="border-0 bg-transparent">
                                <i class="fa-solid fa-trash text-danger"></i>
                            </button>
                        </form>
                    </td>

                </tr>
            {{/each}}

            </tbody>
        </table>
        {{#if totalPages}}
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">

                    {{!-- PREVIOUS --}}
                    <li class="page-item {{#ifEquals page 1}}disabled{{/ifEquals}}">
                        <a class="page-link"
                           href="/admin/category?page={{subtract page 1}}
                        {{#if keyword}}&keyword={{keyword}}{{/if}}
                        {{#if statusFilter}}&status={{statusFilter}}{{/if}}">
                        « Previous
                        </a>
                    </li>

                    {{!-- PAGE NUMBERS --}}
                    {{#each (range 1 totalPages)}}
                        <li class="page-item {{#ifEquals ../page this}}active{{/ifEquals}}">
                            <a class="page-link"
                               href="/admin/category?page={{this}}
                            {{#if ../keyword}}&keyword={{../keyword}}{{/if}}
                            {{#if ../statusFilter}}&status={{../statusFilter}}{{/if}}">
                            {{this}}
                            </a>
                        </li>
                    {{/each}}

                    {{!-- NEXT --}}
                    <li class="page-item {{#ifEquals page totalPages}}disabled{{/ifEquals}}">
                        <a class="page-link"
                           href="/admin/category?page={{add page 1}}
                        {{#if keyword}}&keyword={{keyword}}{{/if}}
                        {{#if statusFilter}}&status={{statusFilter}}{{/if}}">
                        Next »
                        </a>
                    </li>

                </ul>
            </nav>
        {{/if}}

    </div>

</div>
